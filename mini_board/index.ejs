<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <title>ミニメッセージボード</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.css" crossorigin="anonymous" />

        <script>
            function init() {
                var id = localStorage.getItem('id');
                if (id == null) {
                    location.href = './login';
                }
                document.querySelector("#id").textContent = 'ID:' + id;
                document.querySelector("#id_input").value = id;
            }
        </script>
    </head>

    <body class="container" onload="init();">
        <header>
            <h1 class="display-4">メッセージボード</h1>
        </header>
        <div role="main">
            <p>※メッセージは最大10個まで保管されます。</p>
            <form action="/" method="post">
                <p id="id"></p>
                <input type="hidden" name="id" id="id_input">
                <div class="form-group">
                    <label for="msg">Message</label>
                    <input type="text" name="msg" id="msg" class="form-control">
                </div>
                <input type="submit" value="送信" class="btn btn-primary">
            </form>

            <table class="table">
                <% for(var i in data) { %>
                    <%- include('data_item', {val:data[i]}) %>
                <% } %>
            </table>
        </div>
    </body>

</html>
